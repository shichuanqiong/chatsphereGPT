<!doctype html>
<html lang='en'>
<head>
  <meta charset='UTF-8'/>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, viewport-fit=cover'/>
  <meta name='description' content='TalkiSphere - Free real-time chat rooms and anonymous DM community. Start instant conversations with people worldwide.'/>
  <meta name='keywords' content='free chat room, anonymous chat, realtime chat, talk to strangers, chat rooms online, social chat'/>
  <meta name='theme-color' content='#0C1424'/>
  <meta name='apple-mobile-web-app-capable' content='yes'/>
  <meta name='apple-mobile-web-app-status-bar-style' content='black-translucent'/>
  
  <!-- Open Graph / Social Media -->
  <meta property='og:type' content='website'/>
  <meta property='og:url' content='https://talkisphere.com/'/>
  <meta property='og:title' content='TalkiSphere — Free Real-time Chat Rooms & Anonymous Community'/>
  <meta property='og:description' content='Join TalkiSphere to chat freely and instantly. Create rooms, talk to strangers or friends — no registration required.'/>
  <meta property='og:image' content='https://talkisphere.com/og.jpg'/>
  <meta property='og:site_name' content='TalkiSphere'/>
  <meta property='og:locale' content='en_US'/>
  
  <!-- Twitter Card -->
  <meta property='twitter:card' content='summary_large_image'/>
  <meta property='twitter:url' content='https://talkisphere.com/'/>
  <meta property='twitter:title' content='TalkiSphere — Free Real-time Chat Rooms & Anonymous Community'/>
  <meta property='twitter:description' content='A clean, fast and free place to talk online. Join TalkiSphere now!'/>
  <meta property='twitter:image' content='https://talkisphere.com/og.jpg'/>
  
  <!-- Canonical -->
  <link rel='canonical' href='https://talkisphere.com/'/>
  
  <!-- Base path for HashRouter on GitHub Pages -->
  <base href='/' />
  
  <!-- Cache control to prevent stale versions -->
  <meta http-equiv="Cache-Control" content="no-store" />
  
  <!-- Favicon -->
  <link rel='icon' type='image/svg+xml' href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="%2314E3C1"/><text x="50" y="60" font-size="60" font-weight="bold" text-anchor="middle" fill="white">T</text></svg>'/>
  
  <!-- Preconnect to external domains -->
  <link rel='preconnect' href='https://fonts.googleapis.com'/>
  <link rel='preconnect' href='https://fonts.gstatic.com' crossorigin/>
  
  <title>TalkiSphere — Free Real-time Chat Rooms & Anonymous Community</title>
  
  <!-- Schema.org Structured Data -->
  <script type='application/ld+json'>
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "TalkiSphere",
    "url": "https://talkisphere.com",
    "applicationCategory": "SocialNetworking",
    "operatingSystem": "All",
    "description": "Free real-time chat rooms and anonymous DM community. Connect instantly with people worldwide without registration.",
    "keywords": "free chat room, anonymous chat, realtime chat, talk to strangers, social network, live chat",
    "inLanguage": "en",
    "isAccessibleForFree": true,
    "creator": {
      "@type": "Organization",
      "name": "TalkiSphere"
    },
    "author": {
      "@type": "Organization",
      "name": "TalkiSphere",
      "url": "https://talkisphere.com"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    }
  }
  </script>
  
  <!-- Organization Schema -->
  <script type='application/ld+json'>
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "TalkiSphere",
    "url": "https://talkisphere.com",
    "logo": "https://talkisphere.com/logo.png",
    "description": "Free real-time chat rooms and anonymous DM community",
    "sameAs": [
      "https://twitter.com/talkisphere",
      "https://github.com/TalkiSphere"
    ],
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "Customer Support",
      "email": "support@talkisphere.com"
    }
  }
  </script>
  
  <!-- BreadcrumbList Schema -->
  <script type='application/ld+json'>
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://talkisphere.com"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Chat Rooms",
        "item": "https://talkisphere.com/rooms"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "Privacy",
        "item": "https://talkisphere.com/privacy"
      }
    ]
  }
  </script>
  
  <!-- Build revision tracking -->
  <meta name="build-revision" content="%VITE_APP_BUILD%"/>
  
  <!-- Clean old Service Workers and caches on load -->
  <script>
    (function() {
      // 清理旧的 Service Worker 和缓存
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations()
          .then(regs => Promise.all(regs.map(r => r.unregister())))
          .catch(() => {});
        
        if (window.caches && typeof window.caches.keys === 'function') {
          window.caches.keys().then(keys => 
            Promise.all(keys.map(k => window.caches.delete(k)))
          );
        }
      }
      
      // 记录构建版本用于缓存检测
      const rev = document.querySelector('meta[name="build-revision"]')?.content;
      if (rev) {
        try {
          localStorage.setItem('build-revision', rev);
        } catch (e) {}
      }
    })();
  </script>
</head>
<body class='bg-black'>
  <div id='root'></div>
  <script type='module' src='/src/main.tsx'></script>
</body>
</html>